# üìÖ Module Absences & Cong√©s Mobile - BaoProd Workforce Suite

## üìã Fonctionnalit√©s Absences & Cong√©s sur Mobile

**Date** : 3 Janvier 2025  
**Objectif** : Module complet d'absences et cong√©s sur l'application mobile

---

## üéØ Fonctionnalit√©s Principales

### **üë§ Candidat/Int√©rimaire (Mobile)**

#### **1. Demande de Cong√©s** üìù
- **Formulaire de demande** : Type, dates, motif
- **Types de cong√©s** : Pay√©s, maladie, personnel, formation
- **Justificatifs** : Upload de documents (certificats m√©dicaux)
- **Horodatage** : Envoi automatique √† l'employeur et au client
- **Suivi** : Statut de la demande en temps r√©el

#### **2. Justification d'Absences** üìÑ
- **Absences non programm√©es** : Maladie, urgence
- **Justificatifs obligatoires** : Certificats m√©dicaux, attestations
- **Upload de documents** : Photo/scan des justificatifs
- **Notifications automatiques** : Envoi √† employeur et client
- **Tra√ßabilit√©** : Horodatage et validation

#### **3. Consultation des Soldes** üìä
- **Soldes de cong√©s** : Restants, pris, √† venir
- **Historique** : Toutes les demandes et absences
- **Calendrier** : Visualisation des cong√©s accord√©s
- **Statuts** : En attente, approuv√©, refus√©

### **üè¢ Employeur/Client (Mobile)**

#### **1. Gestion des Demandes** ‚úÖ
- **R√©ception** : Notifications des demandes de cong√©s
- **Validation** : Approbation/rejet avec commentaires
- **Justificatifs** : Consultation des documents upload√©s
- **Historique** : Suivi de toutes les demandes

#### **2. Indication des Jours de Repos** üìÖ
- **Planification** : D√©finir les jours de repos de l'int√©rimaire
- **Calendrier** : Interface de planification
- **Notifications** : Envoi automatique √† l'int√©rimaire
- **Modification** : Possibilit√© de modifier les plannings

#### **3. Suivi des Absences** üìà
- **Tableau de bord** : Vue d'ensemble des absences
- **Statistiques** : Taux d'absent√©isme, motifs
- **Alertes** : Absences non justifi√©es
- **Rapports** : Export des donn√©es

### **‚öôÔ∏è Administrateur JLC (Mobile)**

#### **1. Supervision Compl√®te** üëÅÔ∏è
- **Toutes les demandes** : Vue globale des absences
- **Validation** : Approbation en cas de conflit
- **Audit** : Tra√ßabilit√© compl√®te des actions
- **Configuration** : Param√®tres des types de cong√©s

---

## üì± Interface Mobile - √âcrans

### **√âcran Principal - Absences & Cong√©s**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìÖ Absences & Cong√©s                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [üìù Demander un cong√©]              ‚îÇ
‚îÇ [üìÑ Justifier une absence]          ‚îÇ
‚îÇ [üìä Mes soldes]                     ‚îÇ
‚îÇ [üìÖ Mon calendrier]                 ‚îÇ
‚îÇ [üìã Mes demandes]                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **√âcran Demande de Cong√©**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìù Demande de Cong√©                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Type de cong√©: [Dropdown]           ‚îÇ
‚îÇ Date d√©but: [DatePicker]            ‚îÇ
‚îÇ Date fin: [DatePicker]              ‚îÇ
‚îÇ Motif: [TextArea]                   ‚îÇ
‚îÇ Justificatif: [Upload]              ‚îÇ
‚îÇ [Envoyer la demande]                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **√âcran Justification d'Absence**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìÑ Justification d'Absence          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Date d'absence: [DatePicker]        ‚îÇ
‚îÇ Type: [Maladie/Urgence/Personnel]   ‚îÇ
‚îÇ Motif: [TextArea]                   ‚îÇ
‚îÇ Justificatif: [Upload Photo/Scan]   ‚îÇ
‚îÇ [Envoyer la justification]          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **√âcran Gestion Employeur**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üè¢ Gestion Absences                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [üìã Demandes en attente]            ‚îÇ
‚îÇ [üìÖ Planifier jours de repos]       ‚îÇ
‚îÇ [üìä Statistiques]                   ‚îÇ
‚îÇ [üìÑ Justificatifs √† valider]        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß Impl√©mentation Technique

### **Mod√®le Absence**
```dart
class Absence {
  final int id;
  final int userId;
  final String type; // 'conges_payes', 'maladie', 'personnel', 'formation'
  final DateTime startDate;
  final DateTime endDate;
  final String reason;
  final String status; // 'pending', 'approved', 'rejected'
  final String? justification;
  final String? employerComment;
  final String? clientComment;
  final DateTime createdAt;
  final DateTime updatedAt;
  
  // Calculs
  int get durationInDays => endDate.difference(startDate).inDays + 1;
  bool get isPending => status == 'pending';
  bool get isApproved => status == 'approved';
  bool get isRejected => status == 'rejected';
}
```

### **Service Absences**
```dart
class AbsenceService {
  // Demande de cong√©
  Future<bool> requestLeave(Map<String, dynamic> data);
  
  // Justification d'absence
  Future<bool> justifyAbsence(Map<String, dynamic> data);
  
  // Upload de justificatif
  Future<String> uploadJustification(File file);
  
  // Consultation des soldes
  Future<Map<String, int>> getLeaveBalances();
  
  // Historique des demandes
  Future<List<Absence>> getAbsenceHistory();
  
  // Validation (employeur)
  Future<bool> approveAbsence(int absenceId, String comment);
  Future<bool> rejectAbsence(int absenceId, String comment);
}
```

### **Provider Absences**
```dart
class AbsenceProvider extends ChangeNotifier {
  List<Absence> _absences = [];
  Map<String, int> _leaveBalances = {};
  bool _isLoading = false;
  
  // Demande de cong√©
  Future<bool> requestLeave({
    required String type,
    required DateTime startDate,
    required DateTime endDate,
    required String reason,
    File? justification,
  });
  
  // Justification d'absence
  Future<bool> justifyAbsence({
    required DateTime date,
    required String type,
    required String reason,
    required File justification,
  });
  
  // Chargement des donn√©es
  Future<void> loadAbsences();
  Future<void> loadLeaveBalances();
}
```

---

## üìä Workflow des Absences

### **1. Demande de Cong√©**
```
Int√©rimaire ‚Üí Demande ‚Üí Employeur ‚Üí Client ‚Üí Validation
     ‚Üì              ‚Üì         ‚Üì         ‚Üì
  Mobile App    Notification  Review   Final Decision
```

### **2. Justification d'Absence**
```
Int√©rimaire ‚Üí Justification ‚Üí Employeur ‚Üí Client ‚Üí Validation
     ‚Üì              ‚Üì            ‚Üì         ‚Üì
  Mobile App    Notification   Review   Final Decision
```

### **3. Planification des Repos**
```
Employeur ‚Üí Planification ‚Üí Int√©rimaire ‚Üí Confirmation
     ‚Üì            ‚Üì              ‚Üì
  Mobile App   Notification   Acknowledgment
```

---

## üîî Notifications et Alertes

### **Notifications Push**
- **Demande re√ßue** : "Nouvelle demande de cong√© de [Nom]"
- **Validation requise** : "Demande de cong√© en attente de validation"
- **Absence non justifi√©e** : "Absence non justifi√©e d√©tect√©e"
- **Rappel** : "N'oubliez pas de justifier votre absence"

### **Notifications Email**
- **Demande de cong√©** : D√©tails complets avec justificatifs
- **Validation** : Statut de la demande
- **Absence** : Alerte d'absence non justifi√©e
- **Rapport** : R√©sum√© mensuel des absences

### **Notifications SMS**
- **Urgent** : Absence non justifi√©e
- **Rappel** : Justification d'absence en retard
- **Confirmation** : Validation de demande

---

## üìÖ Types de Cong√©s et Absences

### **Types de Cong√©s**
```dart
enum LeaveType {
  congesPayes('Cong√©s pay√©s', true, true),
  maladie('Maladie', true, true),
  personnel('Personnel', false, true),
  formation('Formation', true, false),
  maternite('Maternit√©', true, true),
  paternite('Paternit√©', true, true);
  
  final String label;
  final bool isPaid;
  final bool requiresJustification;
}
```

### **Types d'Absences**
```dart
enum AbsenceType {
  maladie('Maladie', true),
  urgence('Urgence', true),
  personnel('Personnel', false),
  formation('Formation', false);
  
  final String label;
  final bool requiresJustification;
}
```

---

## üé® Interface Utilisateur

### **Couleurs et Statuts**
```dart
class AbsenceStatus {
  static const Color pending = Colors.orange;
  static const Color approved = Colors.green;
  static const Color rejected = Colors.red;
  static const Color expired = Colors.grey;
}
```

### **Ic√¥nes**
```dart
class AbsenceIcons {
  static const IconData conges = Icons.beach_access;
  static const IconData maladie = Icons.medical_services;
  static const IconData personnel = Icons.person;
  static const IconData formation = Icons.school;
  static const IconData upload = Icons.upload_file;
  static const IconData calendar = Icons.calendar_today;
}
```

---

## üìä Statistiques et Reporting

### **M√©triques Int√©rimaire**
- **Cong√©s pris** : Nombre de jours par type
- **Cong√©s restants** : Solde disponible
- **Absences** : Nombre et motifs
- **Taux de pr√©sence** : Pourcentage de pr√©sence

### **M√©triques Employeur**
- **Demandes en attente** : Nombre de validations
- **Taux d'absent√©isme** : Par int√©rimaire
- **Co√ªts** : Impact financier des absences
- **Tendances** : √âvolution dans le temps

### **M√©triques Admin**
- **Vue globale** : Tous les int√©rimaires
- **Alertes** : Absences non justifi√©es
- **Conformit√©** : Respect des proc√©dures
- **Audit** : Tra√ßabilit√© compl√®te

---

## üîí S√©curit√© et Conformit√©

### **Validation des Documents**
- **Format** : PDF, JPG, PNG accept√©s
- **Taille** : Maximum 5MB par document
- **S√©curit√©** : Chiffrement des uploads
- **Audit** : Tra√ßabilit√© des t√©l√©chargements

### **Conformit√© RGPD**
- **Consentement** : Gestion des donn√©es personnelles
- **R√©tention** : Dur√©e de conservation des justificatifs
- **Suppression** : Droit √† l'oubli
- **Export** : Export des donn√©es personnelles

---

## üöÄ Int√©gration avec les Autres Modules

### **Timesheets**
- **Absence automatique** : Pas de pointage possible
- **Heures manqu√©es** : Calcul automatique
- **Impact paie** : D√©duction des heures non travaill√©es

### **Contrats**
- **Clauses** : Respect des conditions contractuelles
- **Renouvellement** : Impact sur la reconduction
- **Terminaison** : Absences r√©p√©t√©es non justifi√©es

### **Paie**
- **D√©duction** : Calcul automatique des absences
- **Indemnit√©s** : Cong√©s pay√©s, maladie
- **Bulletins** : Mention des absences

---

## üì± √âcrans Mobiles D√©taill√©s

### **1. √âcran Principal Absences**
```dart
class AbsencesScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('Absences & Cong√©s')),
      body: Column(
        children: [
          _buildQuickActions(),
          _buildLeaveBalances(),
          _buildRecentRequests(),
          _buildCalendar(),
        ],
      ),
    );
  }
}
```

### **2. √âcran Demande de Cong√©**
```dart
class RequestLeaveScreen extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('Demander un cong√©')),
      body: Form(
        child: Column(
          children: [
            _buildLeaveTypeDropdown(),
            _buildDateRangePicker(),
            _buildReasonField(),
            _buildJustificationUpload(),
            _buildSubmitButton(),
          ],
        ),
      ),
    );
  }
}
```

### **3. √âcran Justification d'Absence**
```dart
class JustifyAbsenceScreen extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('Justifier une absence')),
      body: Form(
        child: Column(
          children: [
            _buildAbsenceDatePicker(),
            _buildAbsenceTypeDropdown(),
            _buildReasonField(),
            _buildJustificationUpload(),
            _buildSubmitButton(),
          ],
        ),
      ),
    );
  }
}
```

---

## üéØ Prochaines √âtapes

### **Imm√©diat**
1. **Cr√©er les mod√®les** Absence et LeaveType
2. **Impl√©menter le service** AbsenceService
3. **D√©velopper le provider** AbsenceProvider

### **Court Terme**
1. **Cr√©er les √©crans** de demande et justification
2. **Int√©grer l'upload** de justificatifs
3. **Impl√©menter les notifications**

### **Moyen Terme**
1. **√âcran de gestion** pour les employeurs
2. **Planification des repos** par les clients
3. **Statistiques et reporting**

---

*Module Absences & Cong√©s Mobile - 3 Janvier 2025*  
*Fonctionnalit√©s compl√®tes pour tous les profils utilisateurs*